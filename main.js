!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-btn",inactiveButtonClass:"modal__submit-btn_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error"},t=(e,t,o)=>{const n=`#${t.id}-error`;e.querySelector(n).textContent="",t.classList.remove(o.inputErrorClass)},o=(e,t,o)=>{(e=>e.some((e=>!e.validity.valid)))(e)?n(t,o):(t.disabled=!1,t.classList.remove(o.inactiveButtonClass))},n=(e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)},r=document.querySelector(".profile__edit-btn"),a=document.querySelector(".profile__add-btn"),c=document.querySelector(".profile__name"),l=document.querySelector(".profile__discription"),s=document.querySelectorAll(".modal"),i=document.querySelector("#edit-modal"),u=i.querySelector(".modal__form"),d=i.querySelector(".modal__submit-btn"),m=i.querySelector(".modal__close-btn"),p=i.querySelector("#profile-name-input"),_=i.querySelector("#profile-discription-input"),y=document.querySelector("#add-card-modal"),f=y.querySelector(".modal__form"),v=y.querySelector(".modal__submit-btn"),S=y.querySelector(".modal__close-btn"),q=y.querySelector("#add-card-name-input"),b=y.querySelector("#add-card-link-input"),h=document.querySelector(".modal__close-btn_type_preview"),g=document.querySelector("#preview-modal"),k=g.querySelector(".modal__image"),E=g.querySelector(".modal__caption"),w=document.querySelector("#card-template"),L=document.querySelector(".cards__list");function C(e){const t=w.content.querySelector(".card").cloneNode(!0),o=t.querySelector(".card__title"),n=t.querySelector(".card__image"),r=t.querySelector(".card__like-button"),a=t.querySelector(".card__delete-btn");return o.textContent=e.name,n.alt=e.name,n.src=e.link,r.addEventListener("click",(()=>{r.classList.toggle("card__like-button_liked")})),n.addEventListener("click",(()=>{x(g),k.src=e.link,k.alt=e.name,E.textContent=e.name})),a.addEventListener("click",(()=>{t.remove()})),t}function x(e){document.addEventListener("keyup",j),e.classList.add("modal_open")}function z(e){document.removeEventListener("keyup",j),e.classList.remove("modal_open")}function j(e){"Escape"===e.key&&z(document.querySelector(".modal_open"))}var A;r.addEventListener("click",(()=>{var n,r,a,s;n=u,a=d,s=e,(r=[p,_]).forEach((e=>{t(n,e,s)})),o(r,a,s),p.value=c.textContent,_.value=l.textContent,x(i)})),m.addEventListener("click",(()=>{z(i)})),a.addEventListener("click",(()=>{x(y)})),S.addEventListener("click",(()=>{z(y)})),h.addEventListener("click",(()=>{z(g)})),u.addEventListener("submit",(function(e){e.preventDefault(),c.textContent=p.value,l.textContent=_.value,z(i)})),f.addEventListener("submit",(function(t){t.preventDefault();const o=C({name:q.value,link:b.value});L.prepend(o),z(y),t.target.reset(),n(v,e)})),[{name:"Val Thorens",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/1-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Restaurant terrace",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/2-photo-by-ceiline-from-pexels.jpg"},{name:"An outdoor cafe",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg"},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg"},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg"},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg"}].forEach((e=>{const t=C(e);L.prepend(t)})),s.forEach((e=>{e.addEventListener("mousedown",(t=>{t.target.classList.contains("modal")&&z(e)}))})),A=e,document.querySelectorAll(A.formSelector).forEach((e=>{((e,n)=>{const r=Array.from(e.querySelectorAll(n.inputSelector)),a=e.querySelector(n.submitButtonSelector);o(r,a,n),r.forEach((c=>{c.addEventListener("input",(function(){((e,o,n)=>{o.validity.valid?t(e,o,n):((e,t,o,n)=>{const r=`#${t.id}-error`;e.querySelector(r).textContent=o,t.classList.add(n.inputErrorClass)})(e,o,o.validationMessage,n)})(e,c,n),o(r,a,n)}))}))})(e,A)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dGlvbi5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLW1haW4vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3N1Ym1pdC1idG5cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc3VibWl0LWJ0bl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JcIixcbn07XG5cbmNvbnN0IHNob3dJbnB1dEVycm9yID0gKGZvcm1FbCwgaW5wdXRFbCwgZXJyb3JNc2csIGNvbmZpZykgPT4ge1xuICBjb25zdCBlcnJvck1zZ0lEID0gYCMke2lucHV0RWwuaWR9LWVycm9yYDtcbiAgY29uc3QgZXJyb3JNc2dFbCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKGVycm9yTXNnSUQpO1xuICBlcnJvck1zZ0VsLnRleHRDb250ZW50ID0gZXJyb3JNc2c7XG4gIGlucHV0RWwuY2xhc3NMaXN0LmFkZChjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbn07XG5cbmNvbnN0IGhpZGVJbnB1dEVycm9yID0gKGZvcm1FbCwgaW5wdXRFbCwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGVycm9yTXNnSUQgPSBgIyR7aW5wdXRFbC5pZH0tZXJyb3JgO1xuICBjb25zdCBlcnJvck1zZ0VsID0gZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoZXJyb3JNc2dJRCk7XG4gIGVycm9yTXNnRWwudGV4dENvbnRlbnQgPSBcIlwiO1xuICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG59O1xuXG5jb25zdCBjaGVja0lucHV0VmFsaWRpdHkgPSAoZm9ybUVsLCBpbnB1dEVsLCBjb25maWcpID0+IHtcbiAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgc2hvd0lucHV0RXJyb3IoZm9ybUVsLCBpbnB1dEVsLCBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlLCBjb25maWcpO1xuICB9IGVsc2Uge1xuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbCwgaW5wdXRFbCwgY29uZmlnKTtcbiAgfVxufTtcblxuY29uc3QgaGFzSW52YWxpZElucHV0ID0gKGlucHV0TGlzdCkgPT4ge1xuICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0KSA9PiB7XG4gICAgcmV0dXJuICFpbnB1dC52YWxpZGl0eS52YWxpZDtcbiAgfSk7XG59O1xuXG5jb25zdCB0b2dnbGVCdXR0b25TdGF0ZSA9IChpbnB1dExpc3QsIGJ1dHRvbkVsLCBjb25maWcpID0+IHtcbiAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgZGlzYWJsZUJ1dHRvbihidXR0b25FbCwgY29uZmlnKTtcbiAgfSBlbHNlIHtcbiAgICBidXR0b25FbC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIGJ1dHRvbkVsLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIC8vcmVtb3ZlIHRoZSBkaXNhYmxlZCBjbGFzc1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZGlzYWJsZUJ1dHRvbiA9IChidXR0b25FbCwgY29uZmlnKSA9PiB7XG4gIGJ1dHRvbkVsLmRpc2FibGVkID0gdHJ1ZTtcbiAgYnV0dG9uRWwuY2xhc3NMaXN0LmFkZChjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG59O1xuXG5leHBvcnQgY29uc3QgcmVzZXRWYWxpZGF0aW9uID0gKGZvcm1FbCwgaW5wdXRMaXN0LCBidXR0b25FbCwgY29uZmlnKSA9PiB7XG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbCwgaW5wdXQsIGNvbmZpZyk7XG4gIH0pO1xuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsLCBjb25maWcpO1xufTtcblxuY29uc3Qgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoZm9ybUVsLCBjb25maWcpID0+IHtcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWwucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcikpO1xuICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcblxuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG5cbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xuICAgICAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3Rvcik7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbCkgPT4ge1xuICAgIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbCwgY29uZmlnKTtcbiAgfSk7XG59O1xuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcblxuaW1wb3J0IHtcbiAgZW5hYmxlVmFsaWRhdGlvbixcbiAgc2V0dGluZ3MsXG4gIGRpc2FibGVCdXR0b24sXG4gIHJlc2V0VmFsaWRhdGlvbixcbn0gZnJvbSBcIi4uL3NjcmlwdHMvdmFsaWRhdGlvbi5qc1wiO1xuXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIlZhbCBUaG9yZW5zXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzEtcGhvdG8tYnktbW9yaXR6LWZlbGRtYW5uLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJSZXN0YXVyYW50IHRlcnJhY2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMi1waG90by1ieS1jZWlsaW5lLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJBbiBvdXRkb29yIGNhZmVcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMy1waG90by1ieS10dWJhbnVyLWRvZ2FuLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJBIHZlcnkgbG9uZyBicmlkZ2UsIG92ZXIgdGhlIGZvcmVzdCBhbmQgdGhyb3VnaCB0aGUgdHJlZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNC1waG90by1ieS1tYXVyaWNlLWxhc2NoZXQtZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlR1bm5lbCB3aXRoIG1vcm5pbmcgbGlnaHRcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNS1waG90by1ieS12YW4tYW5oLW5ndXllbi1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTW91bnRhaW4gaG91c2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNi1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG5dO1xuXG4vL3Byb2ZpbGUgZWxlbWVudHNcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ0blwiKTtcbmNvbnN0IGNhcmRNb2RhbEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ0blwiKTtcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuY29uc3QgcHJvZmlsZURpc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kaXNjcmlwdGlvblwiKTtcblxuY29uc3QgbW9kYWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbFwiKTtcblxuLy9mb3JtIGVsZW1lbnRzXG5jb25zdCBlZGl0UHJvZmlsZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LW1vZGFsXCIpO1xuY29uc3QgZWRpdEZvcm1FbGVtZW50ID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgZWRpdEJ1dHRvbkVsZW1lbnQgPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1Ym1pdC1idG5cIik7XG5jb25zdCBlZGl0TW9kYWxDbG9zZUJ0biA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xuY29uc3QgZWRpdE1vZGFsTmFtZUlucHV0ID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLW5hbWUtaW5wdXRcIlxuKTtcbmNvbnN0IGVkaXRNb2RhbERpc2NyaXB0aW9uSW5wdXQgPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtZGlzY3JpcHRpb24taW5wdXRcIlxuKTtcbmNvbnN0IGNhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XG5jb25zdCBjYXJkRm9ybSA9IGNhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgY2FyZFN1Ym1pdEJ0biA9IGNhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zdWJtaXQtYnRuXCIpO1xuY29uc3QgY2FyZE1vZGFsQ2xvc2VCdG4gPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xuY29uc3QgY2FyZE5hbWVJbnB1dCA9IGNhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLW5hbWUtaW5wdXRcIik7XG5jb25zdCBjYXJkTGlua0lucHV0ID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbGluay1pbnB1dFwiKTtcbmNvbnN0IHByZXZpZXdNb2RhbENsb3NlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIubW9kYWxfX2Nsb3NlLWJ0bl90eXBlX3ByZXZpZXdcIlxuKTtcbi8vc2VsZWN0IHRoZSBtb2RhbFxuY29uc3QgcHJldmlld01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LW1vZGFsXCIpO1xuY29uc3QgcHJldmlld01vZGFsSW1hZ2VFbCA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbmNvbnN0IHByZXZpZXdNb2RhbENhcHRpb25FbCA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xuXG4vL2NhcmQgcmVsYXRlZCBlbGVtZW50c1xuY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpO1xuY29uc3QgY2FyZHNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcblxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZFN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0IGlucHV0VmFsdWVzID0geyBuYW1lOiBjYXJkTmFtZUlucHV0LnZhbHVlLCBsaW5rOiBjYXJkTGlua0lucHV0LnZhbHVlIH07XG4gIGNvbnN0IGNhcmRFbCA9IGdldENhcmRFbGVtZW50KGlucHV0VmFsdWVzKTtcbiAgY2FyZHNMaXN0LnByZXBlbmQoY2FyZEVsKTtcbiAgY2xvc2VNb2RhbChjYXJkTW9kYWwpO1xuICBldnQudGFyZ2V0LnJlc2V0KCk7XG4gIGRpc2FibGVCdXR0b24oY2FyZFN1Ym1pdEJ0biwgc2V0dGluZ3MpO1xufVxuXG5mdW5jdGlvbiBnZXRDYXJkRWxlbWVudChkYXRhKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLmNvbnRlbnRcbiAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgY29uc3QgY2FyZE5hbWVFbCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XG4gIGNvbnN0IGNhcmRMaW5rRWwgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICBjb25zdCBjYXJkTGlrZWRCdG4gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuICBjb25zdCBjYXJkRGVsZXRlQnRuID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnRuXCIpO1xuXG4gIGNhcmROYW1lRWwudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gIGNhcmRMaW5rRWwuYWx0ID0gZGF0YS5uYW1lO1xuICBjYXJkTGlua0VsLnNyYyA9IGRhdGEubGluaztcblxuICBjYXJkTGlrZWRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjYXJkTGlrZWRCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2xpa2VkXCIpO1xuICB9KTtcblxuICBjYXJkTGlua0VsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgb3Blbk1vZGFsKHByZXZpZXdNb2RhbCk7XG4gICAgcHJldmlld01vZGFsSW1hZ2VFbC5zcmMgPSBkYXRhLmxpbms7XG4gICAgcHJldmlld01vZGFsSW1hZ2VFbC5hbHQgPSBkYXRhLm5hbWU7XG4gICAgcHJldmlld01vZGFsQ2FwdGlvbkVsLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICB9KTtcblxuICBjYXJkRGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gIH0pO1xuXG4gIHJldHVybiBjYXJkRWxlbWVudDtcbn1cblxuZnVuY3Rpb24gb3Blbk1vZGFsKG1vZGFsKSB7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBrZXlIYW5kbGVyKTtcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5cIik7XG59XG5cbmZ1bmN0aW9uIGNsb3NlTW9kYWwobW9kYWwpIHtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGtleUhhbmRsZXIpO1xuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlblwiKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRWRpdEZvcm1TdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IGVkaXRNb2RhbE5hbWVJbnB1dC52YWx1ZTtcbiAgcHJvZmlsZURpc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZWRpdE1vZGFsRGlzY3JpcHRpb25JbnB1dC52YWx1ZTtcbiAgY2xvc2VNb2RhbChlZGl0UHJvZmlsZU1vZGFsKTtcbn1cblxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcmVzZXRWYWxpZGF0aW9uKFxuICAgIGVkaXRGb3JtRWxlbWVudCxcbiAgICBbZWRpdE1vZGFsTmFtZUlucHV0LCBlZGl0TW9kYWxEaXNjcmlwdGlvbklucHV0XSxcbiAgICBlZGl0QnV0dG9uRWxlbWVudCxcbiAgICBzZXR0aW5nc1xuICApO1xuICBlZGl0TW9kYWxOYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlTmFtZS50ZXh0Q29udGVudDtcbiAgZWRpdE1vZGFsRGlzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHByb2ZpbGVEaXNjcmlwdGlvbi50ZXh0Q29udGVudDtcbiAgb3Blbk1vZGFsKGVkaXRQcm9maWxlTW9kYWwpO1xufSk7XG5cbmVkaXRNb2RhbENsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNsb3NlTW9kYWwoZWRpdFByb2ZpbGVNb2RhbCk7XG59KTtcblxuY2FyZE1vZGFsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIG9wZW5Nb2RhbChjYXJkTW9kYWwpO1xufSk7XG5cbmNhcmRNb2RhbENsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNsb3NlTW9kYWwoY2FyZE1vZGFsKTtcbn0pO1xuXG5wcmV2aWV3TW9kYWxDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjbG9zZU1vZGFsKHByZXZpZXdNb2RhbCk7XG59KTtcblxuZWRpdEZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlRWRpdEZvcm1TdWJtaXQpO1xuY2FyZEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVBZGRDYXJkU3VibWl0KTtcblxuaW5pdGlhbENhcmRzLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudChpdGVtKTtcbiAgY2FyZHNMaXN0LnByZXBlbmQoY2FyZEVsZW1lbnQpO1xufSk7XG5cbmZ1bmN0aW9uIGtleUhhbmRsZXIoZXZ0KSB7XG4gIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgY29uc3QgYWN0aXZlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX29wZW5cIik7XG4gICAgY2xvc2VNb2RhbChhY3RpdmVNb2RhbCk7XG4gIH1cbn1cblxubW9kYWxzLmZvckVhY2goKG1vZGFsKSA9PiB7XG4gIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xuICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsXCIpKSB7XG4gICAgICBjbG9zZU1vZGFsKG1vZGFsKTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpO1xuIl0sIm5hbWVzIjpbInNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJoaWRlSW5wdXRFcnJvciIsImZvcm1FbCIsImlucHV0RWwiLCJjb25maWciLCJlcnJvck1zZ0lEIiwiaWQiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImlucHV0TGlzdCIsImJ1dHRvbkVsIiwic29tZSIsImlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsImhhc0ludmFsaWRJbnB1dCIsImRpc2FibGVCdXR0b24iLCJkaXNhYmxlZCIsImFkZCIsInByb2ZpbGVFZGl0QnV0dG9uIiwiZG9jdW1lbnQiLCJjYXJkTW9kYWxCdXR0b24iLCJwcm9maWxlTmFtZSIsInByb2ZpbGVEaXNjcmlwdGlvbiIsIm1vZGFscyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlZGl0UHJvZmlsZU1vZGFsIiwiZWRpdEZvcm1FbGVtZW50IiwiZWRpdEJ1dHRvbkVsZW1lbnQiLCJlZGl0TW9kYWxDbG9zZUJ0biIsImVkaXRNb2RhbE5hbWVJbnB1dCIsImVkaXRNb2RhbERpc2NyaXB0aW9uSW5wdXQiLCJjYXJkTW9kYWwiLCJjYXJkRm9ybSIsImNhcmRTdWJtaXRCdG4iLCJjYXJkTW9kYWxDbG9zZUJ0biIsImNhcmROYW1lSW5wdXQiLCJjYXJkTGlua0lucHV0IiwicHJldmlld01vZGFsQ2xvc2VCdG4iLCJwcmV2aWV3TW9kYWwiLCJwcmV2aWV3TW9kYWxJbWFnZUVsIiwicHJldmlld01vZGFsQ2FwdGlvbkVsIiwiY2FyZFRlbXBsYXRlIiwiY2FyZHNMaXN0IiwiZ2V0Q2FyZEVsZW1lbnQiLCJkYXRhIiwiY2FyZEVsZW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiY2FyZE5hbWVFbCIsImNhcmRMaW5rRWwiLCJjYXJkTGlrZWRCdG4iLCJjYXJkRGVsZXRlQnRuIiwibmFtZSIsImFsdCIsInNyYyIsImxpbmsiLCJhZGRFdmVudExpc3RlbmVyIiwidG9nZ2xlIiwib3Blbk1vZGFsIiwibW9kYWwiLCJrZXlIYW5kbGVyIiwiY2xvc2VNb2RhbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJyZXNldFZhbGlkYXRpb24iLCJmb3JFYWNoIiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsImNhcmRFbCIsInByZXBlbmQiLCJ0YXJnZXQiLCJyZXNldCIsIml0ZW0iLCJjb250YWlucyIsInNldEV2ZW50TGlzdGVuZXJzIiwiQXJyYXkiLCJmcm9tIiwiYnV0dG9uRWxlbWVudCIsImlucHV0RWxlbWVudCIsImNoZWNrSW5wdXRWYWxpZGl0eSIsInNob3dJbnB1dEVycm9yIiwiZXJyb3JNc2ciLCJ2YWxpZGF0aW9uTWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=